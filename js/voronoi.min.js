function Voronoi(){this.toRecycle=this.cells=this.edges=this.vertices=null;this.beachsectionJunkyard=[];this.circleEventJunkyard=[];this.vertexJunkyard=[];this.edgeJunkyard=[];this.cellJunkyard=[]}
Voronoi.prototype.reset=function(){this.beachline||(this.beachline=new this.RBTree);if(this.beachline.root)for(var a=this.beachline.getFirst(this.beachline.root);a;)this.beachsectionJunkyard.push(a),a=a.rbNext;this.beachline.root=null;this.circleEvents||(this.circleEvents=new this.RBTree);this.circleEvents.root=this.firstCircleEvent=null;this.vertices=[];this.edges=[];this.cells=[]};Voronoi.prototype.sqrt=Math.sqrt;Voronoi.prototype.abs=Math.abs;Voronoi.prototype.\u03b5=Voronoi.\u03b5=1E-9;
Voronoi.prototype.inv\u03b5=Voronoi.inv\u03b5=1/Voronoi.\u03b5;Voronoi.prototype.equalWithEpsilon=function(a,b){return 1E-9>this.abs(a-b)};Voronoi.prototype.greaterThanWithEpsilon=function(a,b){return 1E-9<a-b};Voronoi.prototype.greaterThanOrEqualWithEpsilon=function(a,b){return 1E-9>b-a};Voronoi.prototype.lessThanWithEpsilon=function(a,b){return 1E-9<b-a};Voronoi.prototype.lessThanOrEqualWithEpsilon=function(a,b){return 1E-9>a-b};Voronoi.prototype.RBTree=function(){this.root=null};
Voronoi.prototype.RBTree.prototype.rbInsertSuccessor=function(a,b){var c;if(a){b.rbPrevious=a;if(b.rbNext=a.rbNext)a.rbNext.rbPrevious=b;a.rbNext=b;if(a.rbRight){for(a=a.rbRight;a.rbLeft;)a=a.rbLeft;a.rbLeft=b}else a.rbRight=b;c=a}else this.root?(a=this.getFirst(this.root),b.rbPrevious=null,b.rbNext=a,a.rbPrevious=b,a.rbLeft=b,c=a):(b.rbPrevious=b.rbNext=null,this.root=b,c=null);b.rbLeft=b.rbRight=null;b.rbParent=c;b.rbRed=!0;var d,e;for(a=b;c&&c.rbRed;)d=c.rbParent,c===d.rbLeft?(e=d.rbRight)&&e.rbRed?
(c.rbRed=e.rbRed=!1,d.rbRed=!0,a=d):(a===c.rbRight&&(this.rbRotateLeft(c),a=c,c=a.rbParent),c.rbRed=!1,d.rbRed=!0,this.rbRotateRight(d)):(e=d.rbLeft)&&e.rbRed?(c.rbRed=e.rbRed=!1,d.rbRed=!0,a=d):(a===c.rbLeft&&(this.rbRotateRight(c),a=c,c=a.rbParent),c.rbRed=!1,d.rbRed=!0,this.rbRotateLeft(d)),c=a.rbParent;this.root.rbRed=!1};
Voronoi.prototype.RBTree.prototype.rbRemoveNode=function(a){a.rbNext&&(a.rbNext.rbPrevious=a.rbPrevious);a.rbPrevious&&(a.rbPrevious.rbNext=a.rbNext);a.rbNext=a.rbPrevious=null;var b=a.rbParent,c=a.rbLeft,d=a.rbRight,e;e=c?d?this.getFirst(d):c:d;b?b.rbLeft===a?b.rbLeft=e:b.rbRight=e:this.root=e;var f;c&&d?(f=e.rbRed,e.rbRed=a.rbRed,e.rbLeft=c,c.rbParent=e,e!==d?(b=e.rbParent,e.rbParent=a.rbParent,a=e.rbRight,b.rbLeft=a,e.rbRight=d,d.rbParent=e):(e.rbParent=b,b=e,a=e.rbRight)):(f=a.rbRed,a=e);a&&(a.rbParent=
b);if(!f)if(a&&a.rbRed)a.rbRed=!1;else{do{if(a===this.root)break;if(a===b.rbLeft){if(a=b.rbRight,a.rbRed&&(a.rbRed=!1,b.rbRed=!0,this.rbRotateLeft(b),a=b.rbRight),a.rbLeft&&a.rbLeft.rbRed||a.rbRight&&a.rbRight.rbRed){a.rbRight&&a.rbRight.rbRed||(a.rbLeft.rbRed=!1,a.rbRed=!0,this.rbRotateRight(a),a=b.rbRight);a.rbRed=b.rbRed;b.rbRed=a.rbRight.rbRed=!1;this.rbRotateLeft(b);a=this.root;break}}else if(a=b.rbLeft,a.rbRed&&(a.rbRed=!1,b.rbRed=!0,this.rbRotateRight(b),a=b.rbLeft),a.rbLeft&&a.rbLeft.rbRed||
a.rbRight&&a.rbRight.rbRed){a.rbLeft&&a.rbLeft.rbRed||(a.rbRight.rbRed=!1,a.rbRed=!0,this.rbRotateLeft(a),a=b.rbLeft);a.rbRed=b.rbRed;b.rbRed=a.rbLeft.rbRed=!1;this.rbRotateRight(b);a=this.root;break}a.rbRed=!0;a=b;b=b.rbParent}while(!a.rbRed);a&&(a.rbRed=!1)}};Voronoi.prototype.RBTree.prototype.rbRotateLeft=function(a){var b=a.rbRight,c=a.rbParent;c?c.rbLeft===a?c.rbLeft=b:c.rbRight=b:this.root=b;b.rbParent=c;a.rbParent=b;a.rbRight=b.rbLeft;a.rbRight&&(a.rbRight.rbParent=a);b.rbLeft=a};
Voronoi.prototype.RBTree.prototype.rbRotateRight=function(a){var b=a.rbLeft,c=a.rbParent;c?c.rbLeft===a?c.rbLeft=b:c.rbRight=b:this.root=b;b.rbParent=c;a.rbParent=b;a.rbLeft=b.rbRight;a.rbLeft&&(a.rbLeft.rbParent=a);b.rbRight=a};Voronoi.prototype.RBTree.prototype.getFirst=function(a){for(;a.rbLeft;)a=a.rbLeft;return a};Voronoi.prototype.RBTree.prototype.getLast=function(a){for(;a.rbRight;)a=a.rbRight;return a};Voronoi.prototype.Diagram=function(a){this.site=a};
Voronoi.prototype.Cell=function(a){this.site=a;this.halfedges=[];this.closeMe=!1};Voronoi.prototype.Cell.prototype.init=function(a){this.site=a;this.halfedges=[];this.closeMe=!1;return this};Voronoi.prototype.createCell=function(a){var b=this.cellJunkyard.pop();return b?b.init(a):new this.Cell(a)};Voronoi.prototype.Cell.prototype.prepareHalfedges=function(){for(var a=this.halfedges,b=a.length,c;b--;)c=a[b].edge,c.vb&&c.va||a.splice(b,1);a.sort(function(a,b){return b.angle-a.angle});return a.length};
Voronoi.prototype.Cell.prototype.getNeighborIds=function(){for(var a=[],b=this.halfedges.length,c;b--;)c=this.halfedges[b].edge,null!==c.lSite&&c.lSite.voronoiId!=this.site.voronoiId?a.push(c.lSite.voronoiId):null!==c.rSite&&c.rSite.voronoiId!=this.site.voronoiId&&a.push(c.rSite.voronoiId);return a};
Voronoi.prototype.Cell.prototype.getBbox=function(){for(var a=this.halfedges,b=a.length,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g,h;b--;)g=a[b].getStartpoint(),h=g.x,g=g.y,h<c&&(c=h),g<d&&(d=g),h>e&&(e=h),g>f&&(f=g);return{x:c,y:d,width:e-c,height:f-d}};Voronoi.prototype.Cell.prototype.pointIntersection=function(a,b){for(var c=this.halfedges,d=c.length,e,f;d--;){e=c[d];f=e.getStartpoint();e=e.getEndpoint();f=(b-f.y)*(e.x-f.x)-(a-f.x)*(e.y-f.y);if(!f)return 0;if(0<f)return-1}return 1};
Voronoi.prototype.Vertex=function(a,b){this.x=a;this.y=b};Voronoi.prototype.Edge=function(a,b){this.lSite=a;this.rSite=b;this.va=this.vb=null};Voronoi.prototype.Halfedge=function(a,b,c){this.site=b;this.edge=a;if(c)this.angle=Math.atan2(c.y-b.y,c.x-b.x);else{c=a.va;var d=a.vb;this.angle=a.lSite===b?Math.atan2(d.x-c.x,c.y-d.y):Math.atan2(c.x-d.x,d.y-c.y)}};Voronoi.prototype.createHalfedge=function(a,b,c){return new this.Halfedge(a,b,c)};
Voronoi.prototype.Halfedge.prototype.getStartpoint=function(){return this.edge.lSite===this.site?this.edge.va:this.edge.vb};Voronoi.prototype.Halfedge.prototype.getEndpoint=function(){return this.edge.lSite===this.site?this.edge.vb:this.edge.va};Voronoi.prototype.createVertex=function(a,b){var c=this.vertexJunkyard.pop();c?(c.x=a,c.y=b):c=new this.Vertex(a,b);this.vertices.push(c);return c};
Voronoi.prototype.createEdge=function(a,b,c,d){var e=this.edgeJunkyard.pop();e?(e.lSite=a,e.rSite=b,e.va=e.vb=null):e=new this.Edge(a,b);this.edges.push(e);c&&this.setEdgeStartpoint(e,a,b,c);d&&this.setEdgeEndpoint(e,a,b,d);this.cells[a.voronoiId].halfedges.push(this.createHalfedge(e,a,b));this.cells[b.voronoiId].halfedges.push(this.createHalfedge(e,b,a));return e};
Voronoi.prototype.createBorderEdge=function(a,b,c){var d=this.edgeJunkyard.pop();d?(d.lSite=a,d.rSite=null):d=new this.Edge(a,null);d.va=b;d.vb=c;this.edges.push(d);return d};Voronoi.prototype.setEdgeStartpoint=function(a,b,c,d){a.va||a.vb?a.lSite===c?a.vb=d:a.va=d:(a.va=d,a.lSite=b,a.rSite=c)};Voronoi.prototype.setEdgeEndpoint=function(a,b,c,d){this.setEdgeStartpoint(a,c,b,d)};Voronoi.prototype.Beachsection=function(){};
Voronoi.prototype.createBeachsection=function(a){var b=this.beachsectionJunkyard.pop();b||(b=new this.Beachsection);b.site=a;return b};Voronoi.prototype.leftBreakPoint=function(a,b){var c=a.site,d=c.x,e=c.y,f=e-b;if(!f)return d;var g=a.rbPrevious;if(!g)return-Infinity;var c=g.site,g=c.x,c=c.y,h=c-b;if(!h)return g;var k=g-d,m=1/f-1/h,l=k/h;return m?(-l+this.sqrt(l*l-2*m*(k*k/(-2*h)-c+h/2+e-f/2)))/m+d:(d+g)/2};
Voronoi.prototype.rightBreakPoint=function(a,b){var c=a.rbNext;if(c)return this.leftBreakPoint(c,b);c=a.site;return c.y===b?c.x:Infinity};Voronoi.prototype.detachBeachsection=function(a){this.detachCircleEvent(a);this.beachline.rbRemoveNode(a);this.beachsectionJunkyard.push(a)};
Voronoi.prototype.removeBeachsection=function(a){var b=a.circleEvent,c=b.x,d=b.ycenter,b=this.createVertex(c,d),e=a.rbPrevious,f=a.rbNext,g=[a],h=Math.abs;this.detachBeachsection(a);for(a=e;a.circleEvent&&1E-9>h(c-a.circleEvent.x)&&1E-9>h(d-a.circleEvent.ycenter);)e=a.rbPrevious,g.unshift(a),this.detachBeachsection(a),a=e;g.unshift(a);this.detachCircleEvent(a);for(e=f;e.circleEvent&&1E-9>h(c-e.circleEvent.x)&&1E-9>h(d-e.circleEvent.ycenter);)f=e.rbNext,g.push(e),this.detachBeachsection(e),e=f;g.push(e);
this.detachCircleEvent(e);c=g.length;for(d=1;d<c;d++)e=g[d],a=g[d-1],this.setEdgeStartpoint(e.edge,a.site,e.site,b);a=g[0];e=g[c-1];e.edge=this.createEdge(a.site,e.site,void 0,b);this.attachCircleEvent(a);this.attachCircleEvent(e)};
Voronoi.prototype.addBeachsection=function(a){for(var b=a.x,c=a.y,d,e,f,g,h=this.beachline.root;h;)if(f=this.leftBreakPoint(h,c)-b,1E-9<f)h=h.rbLeft;else if(g=b-this.rightBreakPoint(h,c),1E-9<g){if(!h.rbRight){d=h;break}h=h.rbRight}else{-1E-9<f?(d=h.rbPrevious,e=h):-1E-9<g?(d=h,e=h.rbNext):d=e=h;break}b=this.createBeachsection(a);this.beachline.rbInsertSuccessor(d,b);if(d||e)if(d===e)this.detachCircleEvent(d),e=this.createBeachsection(d.site),this.beachline.rbInsertSuccessor(b,e),b.edge=e.edge=this.createEdge(d.site,
b.site),this.attachCircleEvent(d),this.attachCircleEvent(e);else if(d&&!e)b.edge=this.createEdge(d.site,b.site);else if(d!==e){this.detachCircleEvent(d);this.detachCircleEvent(e);c=d.site;g=c.x;var h=c.y,k=a.x-g,m=a.y-h;f=e.site;var l=f.x-g,p=f.y-h,q=2*(k*p-m*l),n=k*k+m*m,u=l*l+p*p;g=this.createVertex((p*n-m*u)/q+g,(k*u-l*n)/q+h);this.setEdgeStartpoint(e.edge,c,f,g);b.edge=this.createEdge(c,a,void 0,g);e.edge=this.createEdge(a,f,void 0,g);this.attachCircleEvent(d);this.attachCircleEvent(e)}};
Voronoi.prototype.CircleEvent=function(){this.rbPrevious=this.rbParent=this.rbNext=this.rbLeft=this.arc=null;this.rbRed=!1;this.site=this.rbRight=null;this.x=this.y=this.ycenter=0};
Voronoi.prototype.attachCircleEvent=function(a){var b=a.rbPrevious,c=a.rbNext;if(b&&c){var d=b.site,b=a.site,e=c.site;if(d!==e){var c=b.x,f=b.y,g=d.x-c,h=d.y-f,d=e.x-c,k=e.y-f,e=2*(g*k-h*d);if(!(-2E-12<=e)){var m=g*g+h*h,l=d*d+k*k,h=(k*m-h*l)/e,g=(g*l-d*m)/e,d=g+f;(f=this.circleEventJunkyard.pop())||(f=new this.CircleEvent);f.arc=a;f.site=b;f.x=h+c;f.y=d+this.sqrt(h*h+g*g);f.ycenter=d;a.circleEvent=f;a=null;for(b=this.circleEvents.root;b;)if(f.y<b.y||f.y===b.y&&f.x<=b.x)if(b.rbLeft)b=b.rbLeft;else{a=
b.rbPrevious;break}else if(b.rbRight)b=b.rbRight;else{a=b;break}this.circleEvents.rbInsertSuccessor(a,f);a||(this.firstCircleEvent=f)}}}};Voronoi.prototype.detachCircleEvent=function(a){var b=a.circleEvent;b&&(b.rbPrevious||(this.firstCircleEvent=b.rbNext),this.circleEvents.rbRemoveNode(b),this.circleEventJunkyard.push(b),a.circleEvent=null)};
Voronoi.prototype.connectEdge=function(a,b){var c=a.vb;if(c)return!0;var d=a.va,c=b.xl,e=b.xr,f=b.yt,g=b.yb,h=a.lSite,k=a.rSite,m=h.x,l=h.y,p=k.x,q=k.y,n=(m+p)/2,u=(l+q)/2,r,t;this.cells[h.voronoiId].closeMe=!0;this.cells[k.voronoiId].closeMe=!0;q!==l&&(r=(m-p)/(q-l),t=u-r*n);if(void 0===r){if(n<c||n>=e)return!1;if(m>p){if(!d||d.y<f)d=this.createVertex(n,f);else if(d.y>=g)return!1;c=this.createVertex(n,g)}else{if(!d||d.y>g)d=this.createVertex(n,g);else if(d.y<f)return!1;c=this.createVertex(n,f)}}else if(-1>
r||1<r)if(m>p){if(!d||d.y<f)d=this.createVertex((f-t)/r,f);else if(d.y>=g)return!1;c=this.createVertex((g-t)/r,g)}else{if(!d||d.y>g)d=this.createVertex((g-t)/r,g);else if(d.y<f)return!1;c=this.createVertex((f-t)/r,f)}else if(l<q){if(!d||d.x<c)d=this.createVertex(c,r*c+t);else if(d.x>=e)return!1;c=this.createVertex(e,r*e+t)}else{if(!d||d.x>e)d=this.createVertex(e,r*e+t);else if(d.x<c)return!1;c=this.createVertex(c,r*c+t)}a.va=d;a.vb=c;return!0};
Voronoi.prototype.clipEdge=function(a,b){var c=a.va.x,d=a.va.y,e=0,f=1,g=a.vb.x-c,h=a.vb.y-d,k=c-b.xl;if(0===g&&0>k)return!1;k=-k/g;if(0>g){if(k<e)return!1;k<f&&(f=k)}else if(0<g){if(k>f)return!1;k>e&&(e=k)}k=b.xr-c;if(0===g&&0>k)return!1;k/=g;if(0>g){if(k>f)return!1;k>e&&(e=k)}else if(0<g){if(k<e)return!1;k<f&&(f=k)}k=d-b.yt;if(0===h&&0>k)return!1;k=-k/h;if(0>h){if(k<e)return!1;k<f&&(f=k)}else if(0<h){if(k>f)return!1;k>e&&(e=k)}k=b.yb-d;if(0===h&&0>k)return!1;k/=h;if(0>h){if(k>f)return!1;k>e&&(e=
k)}else if(0<h){if(k<e)return!1;k<f&&(f=k)}0<e&&(a.va=this.createVertex(c+e*g,d+e*h));1>f&&(a.vb=this.createVertex(c+f*g,d+f*h));if(0<e||1>f)this.cells[a.lSite.voronoiId].closeMe=!0,this.cells[a.rSite.voronoiId].closeMe=!0;return!0};Voronoi.prototype.clipEdges=function(a){for(var b=this.edges,c=b.length,d,e=Math.abs;c--;)if(d=b[c],!this.connectEdge(d,a)||!this.clipEdge(d,a)||1E-9>e(d.va.x-d.vb.x)&&1E-9>e(d.va.y-d.vb.y))d.va=d.vb=null,b.splice(c,1)};
Voronoi.prototype.closeCells=function(a){var b=a.xl,c=a.xr,d=a.yt;a=a.yb;for(var e=this.cells,f=e.length,g,h,k,m,l,p,q,n,u=Math.abs;f--;)if(g=e[f],g.prepareHalfedges()&&g.closeMe){k=g.halfedges;m=k.length;for(h=0;h<m;){l=k[h].getEndpoint();q=k[(h+1)%m].getStartpoint();if(1E-9<=u(l.x-q.x)||1E-9<=u(l.y-q.y))switch(!0){case this.equalWithEpsilon(l.x,b)&&this.lessThanWithEpsilon(l.y,a):n=this.equalWithEpsilon(q.x,b);p=this.createVertex(b,n?q.y:a);l=this.createBorderEdge(g.site,l,p);h++;k.splice(h,0,this.createHalfedge(l,
g.site,null));m++;if(n)break;l=p;case this.equalWithEpsilon(l.y,a)&&this.lessThanWithEpsilon(l.x,c):n=this.equalWithEpsilon(q.y,a);p=this.createVertex(n?q.x:c,a);l=this.createBorderEdge(g.site,l,p);h++;k.splice(h,0,this.createHalfedge(l,g.site,null));m++;if(n)break;l=p;case this.equalWithEpsilon(l.x,c)&&this.greaterThanWithEpsilon(l.y,d):n=this.equalWithEpsilon(q.x,c);p=this.createVertex(c,n?q.y:d);l=this.createBorderEdge(g.site,l,p);h++;k.splice(h,0,this.createHalfedge(l,g.site,null));m++;if(n)break;
l=p;case this.equalWithEpsilon(l.y,d)&&this.greaterThanWithEpsilon(l.x,b):n=this.equalWithEpsilon(q.y,d);p=this.createVertex(n?q.x:b,d);l=this.createBorderEdge(g.site,l,p);h++;k.splice(h,0,this.createHalfedge(l,g.site,null));m++;if(n)break;l=p;n=this.equalWithEpsilon(q.x,b);p=this.createVertex(b,n?q.y:a);l=this.createBorderEdge(g.site,l,p);h++;k.splice(h,0,this.createHalfedge(l,g.site,null));m++;if(n)break;l=p;n=this.equalWithEpsilon(q.y,a);p=this.createVertex(n?q.x:c,a);l=this.createBorderEdge(g.site,
l,p);h++;k.splice(h,0,this.createHalfedge(l,g.site,null));m++;if(n)break;l=p;n=this.equalWithEpsilon(q.x,c);p=this.createVertex(c,n?q.y:d);l=this.createBorderEdge(g.site,l,p);h++;k.splice(h,0,this.createHalfedge(l,g.site,null));m++;if(n)break;default:throw"Voronoi.closeCells() > this makes no sense!";}h++}g.closeMe=!1}};Voronoi.prototype.quantizeSites=function(a){for(var b=this.\u03b5,c=a.length,d;c--;)d=a[c],d.x=Math.floor(d.x/b)*b,d.y=Math.floor(d.y/b)*b};
Voronoi.prototype.recycle=function(a){if(a)if(a instanceof this.Diagram)this.toRecycle=a;else throw"Voronoi.recycleDiagram() > Need a Diagram object.";};
Voronoi.prototype.compute=function(a,b){var c=new Date;this.reset();this.toRecycle&&(this.vertexJunkyard=this.vertexJunkyard.concat(this.toRecycle.vertices),this.edgeJunkyard=this.edgeJunkyard.concat(this.toRecycle.edges),this.cellJunkyard=this.cellJunkyard.concat(this.toRecycle.cells),this.toRecycle=null);var d=a.slice(0);d.sort(function(a,b){var c=b.y-a.y;return c?c:b.x-a.x});for(var e=d.pop(),f=0,g,h,k=this.cells,m;;)if(m=this.firstCircleEvent,e&&(!m||e.y<m.y||e.y===m.y&&e.x<m.x)){if(e.x!==g||
e.y!==h)k[f]=this.createCell(e),e.voronoiId=f++,this.addBeachsection(e),h=e.y,g=e.x;e=d.pop()}else if(m)this.removeBeachsection(m.arc);else break;this.clipEdges(b);this.closeCells(b);d=new Date;e=new this.Diagram;e.cells=this.cells;e.edges=this.edges;e.vertices=this.vertices;e.execTime=d.getTime()-c.getTime();this.reset();return e};"undefined"!==typeof module&&(module.exports=Voronoi);function clamp(a,b,c){return Math.max(b,Math.min(a,c))}function pick(a,b){var c=Math.round(Math.random()*(a.length-1)),c=a[c];if("undefined"!=typeof b)for(;c==b;)c=Math.round(Math.random()*(a.length-1)),c=a[c];return c}
var VoronoiAnimation={voronoi:new Voronoi,sites:[],diagram:null,margin:125,canvas:null,colors:[],bbox:{xl:0,xr:0,yt:0,yb:0},normalizeEventCoords:function(a,b){b||(b=self.event);var c=0,d=0;if(b.pageX||b.pageY)c=b.pageX,d=b.pageY;else if(b.clientX||b.clientY)c=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,d=b.clientY+document.body.scrollTop+document.documentElement.scrollTop;return{x:c-a.offsetLeft,y:d-a.offsetTop}},init:function(){var a=this;this.canvas=document.getElementById("voronoiCanvas");
this.overlay=document.getElementById("overlayCanvas");this.lines=document.getElementById("linesCanvas");this.hidden=document.getElementById("hiddenCanvas");this.bbox.xr=this.canvas.width;this.bbox.yb=this.canvas.height;this.colors=["#FF6138","#FFFF9D","#BEEB9F","#79BD8F","#00A388"];a.trackmouse=-1;$(this.canvas).on("mousemove",function(b){a.trackmouse=a.sites.length-1;var d=a.sites[a.trackmouse];b=me.normalizeEventCoords(me.canvas,b);d.x=b.x;d.vx=0;d.y=b.y;d.vy=0});$(this.canvas).on("mouseout",function(b){a.trackmouse=
-1});this.randomSites(35,!0);this.render();setTimeout("VoronoiAnimation.animate()",0);this.byLineEl=document.getElementById("byline");var b=pick(byLines);this.prevByLine=b;this.byLineEl.innerHTML=b;setInterval("VoronoiAnimation.ticker()",5E3)},ticker:function(){var a=pick(byLines,this.prevByLine);this.prevByLine=a;var b=this.byLineEl;$(this.byLineEl).animate({opacity:0},750,"easeOutQuad",function(){b.innerHTML=a;$(b).animate({opacity:1},250,"easeInQuad")})},animate:function(){for(var a=1;a<this.sites.length;a++){var b=
this.sites[a];b.x+=b.dx*b.vx;if(0>b.x||b.x>this.canvas.width)b.dx=-b.dx;b.x=Math.min(this.canvas.width,Math.max(0,b.x));b.y+=b.dy*b.vy;if(0>b.y||b.y>this.canvas.height)b.dy=-b.dy;b.y=Math.min(this.canvas.height,Math.max(0,b.y));this.sites[a]=b}this.diagram=this.voronoi.compute(this.sites,this.bbox);this.render();setTimeout("VoronoiAnimation.animate()",1E3/60)},clearSites:function(){this.sites=[];this.diagram=this.voronoi.compute(this.sites,this.bbox)},randomSites:function(a,b){b&&(this.sites=[]);
for(var c=this.margin,d=this.canvas.width-2*this.margin,e=this.margin,f=this.canvas.height-2*this.margin,g=0;g<a;g++)this.addSite(Math.round(c+Math.random()*d),Math.round(e+Math.random()*f));this.diagram=this.voronoi.compute(this.sites,this.bbox)},addSite:function(a,b){this.sites.push({x:a,y:b,dx:.5<Math.random()?-1:1,dy:.5<Math.random()?-1:1,vx:clamp(Math.random(),.2,1),vy:clamp(Math.random(),.2,1),c:pick(this.colors)});this.diagram=this.voronoi.compute(this.sites,this.bbox)},renderEdges:function(a,
b){var c=this.diagram.edges,d=c.length,e;if(d){var f;a.beginPath();for(a.strokeStyle=b;d--;)f=c[d],e=f.va,a.moveTo(e.x,e.y),e=f.vb,a.lineTo(e.x,e.y);a.stroke()}},renderSites:function(a,b){var c=this.sites,d=c.length,e;a.beginPath();a.fillStyle=b;for(a.strokeStyle=b;d--;)e=c[d],a.rect(e.x-2/3,e.y-2/3,2,2);a.fill()},renderCell:function(a,b,c){b=b.halfedges;var d=b.length;if(2<d){v=b[0].getStartpoint();a.beginPath();a.moveTo(v.x,v.y);for(var e=0;e<d;e++)v=b[e].getEndpoint(),a.lineTo(v.x,v.y);a.fillStyle=
c;a.strokeStyle=c;a.fill()}},renderCellOutline:function(a,b,c,d){if("undefined"!=typeof d){var e=a.lineWidth;a.lineWidth=d}a.strokeStyle=c;b=b.halfedges;c=b.length;if(2<c){v=b[0].getStartpoint();a.beginPath();a.moveTo(v.x,v.y);for(var f=0;f<c;f++)v=b[f].getEndpoint(),a.lineTo(v.x,v.y);a.stroke()}"undefined"!=typeof d&&(a.lineWidth=e)},clear:function(a,b,c){"undefined"==typeof c&&(c=1);a.globalAlpha=c;a.lineWidth=1;a.strokeStyle="#000";a.fillStyle="#000";a.clearRect(0,0,a.canvas.width,a.canvas.height)},
render:function(){var a=this.canvas.getContext("2d");this.clear(a,"#fff");var b=this.overlay.getContext("2d");b.globalCompositeOperation="destination-atop";this.clear(b,"#000",.95);var c=this.lines.getContext("2d");this.clear(c,"#fff");var d=this.hidden.getContext("2d");this.clear(d,"#000");if(-1!=this.trackmouse){var e=this.diagram.cells[this.sites[this.trackmouse].voronoiId];e&&this.renderCell(b,e,"#fff")}for(b=0;b<this.diagram.cells.length;b++)if(e=this.diagram.cells[b],void 0==e.site.c&&(e.site.c=
this.colors[Math.round(Math.random()*this.colors.length)]),this.renderCellOutline(d,e,this.colors[4],1),-1==this.trackmouse||this.sites[this.trackmouse].voronoiId!=b)this.renderCell(a,e,e.site.c),this.renderCellOutline(a,e,e.site.c,.5);"#debug"==document.location.hash&&(document.getElementById("caption").style.display="none",this.renderEdges(d,"#f0f"),this.renderEdges(a,"#f0f"),this.renderSites(d,"#f0f"),this.renderSites(a,"#f0f"));a=d.getImageData(0,112.141,this.hidden.width,242);c.putImageData(a,
0,111.141)}},byLines='Can be found on, <a href="https://github.com/brucejillis">Github</a>;Can be found on, <a href="https://www.youtube.com/user/JillisterHove">YouTube</a>;Can sometimes be found on, <a href="https://twitter.com/jillis">Twitter</a>;Lives in, <a href="https://www.google.nl/maps/place/Arnhem/@52.0056159,5.8965987,12z/data=!3m1!4b1!4m2!3m1!1s0x47c7ba91ce9b2273:0x161c5ae0f973cad7?hl=en">Arnhem, the Netherlands</a>;Can be contacted via, <a href="mailto://j.terhove (AT) gmail (DOT) com">j.terhove (AT) gmail (DOT) com</a>.;Once made a mario-like game where you are the bad guy, <a href="https://dl.dropboxusercontent.com/u/29254286/index.html">Before the Hero Arrives</a>.;Once made a top-down sailing simulation game, <a href="https://dl.dropboxusercontent.com/u/29254286/bgj2.html">Eco2</a>.;Once made some stuff in flash, <a href="https://dl.dropboxusercontent.com/u/29254286/juicy.html">games and juicyness</a>, <a href="https://dl.dropboxusercontent.com/u/29254286/FlxMinimap.html">flixel minimap</a>.;Once tried to make a game in unity, <a href="https://dl.dropboxusercontent.com/u/29254286/ionan/ionan.html">v2</a> < <a href="https://dl.dropboxusercontent.com/u/29254286/planetwide/Web.html">v1</a> < <a href="https://dl.dropboxusercontent.com/u/29254286/escape/escape.html">v0.1</a>.;Recorded some UI experiments in unity, <a href="https://dl.dropboxusercontent.com/u/29254286/v09.gif">as a GIF</a> and on <a href="https://www.youtube.com/watch?v=fTjL-R37vvU&ab_channel=JillisterHove">YouTube</a>.;Wrote libraries for language detection in, <a href="https://github.com/BruceJillis/PHP-Language-Detection">PHP</a> and <a href="https://github.com/BruceJillis/LanguageIdentification">python</a>.;Really enjoyed playing minecraft, <a href="https://www.youtube.com/watch?v=s2y-adFJeKQ&ab_channel=JillisterHove">Gaze Detecting Enderman Heads</a>.;Really enjoyed playing minecraft, <a href="https://www.youtube.com/watch?v=a1yORDZsHb8&ab_channel=JillisterHove">Prototype Dungeon Generator</a> + <a href="https://www.youtube.com/watch?v=55QhLcPvWS8&ab_channel=JillisterHove">more work</a>.;Really enjoyed playing minecraft, <a href="https://www.youtube.com/watch?v=Ns208w9rua0&ab_channel=JillisterHove">Mailbox Mod</a>.;Once tried to create a programming language, <a href="https://github.com/BruceJillis/fp.py">fp</a>.'.split(";");
$(document).ready(function(){function a(){b.width=window.innerWidth;b.height=window.innerHeight;c.width=window.innerWidth;c.height=window.innerHeight;d.width=window.innerWidth;d.height=window.innerHeight;e.width=window.innerWidth;e.height=window.innerHeight;VoronoiAnimation.init();window.removeEventListener("resize",a)}var b=document.getElementById("voronoiCanvas"),c=document.getElementById("overlayCanvas"),d=document.getElementById("linesCanvas"),e=document.getElementById("hiddenCanvas");window.addEventListener("resize",
a,!1);a();$(document).on("click","h2 > a",function(a){a=$(this).attr("href");ga("send","event","click",a)})});