function Voronoi(){this.toRecycle=this.cells=this.edges=this.vertices=null;this.beachsectionJunkyard=[];this.circleEventJunkyard=[];this.vertexJunkyard=[];this.edgeJunkyard=[];this.cellJunkyard=[]}
Voronoi.prototype.reset=function(){this.beachline||(this.beachline=new this.RBTree);if(this.beachline.root)for(var a=this.beachline.getFirst(this.beachline.root);a;)this.beachsectionJunkyard.push(a),a=a.rbNext;this.beachline.root=null;this.circleEvents||(this.circleEvents=new this.RBTree);this.circleEvents.root=this.firstCircleEvent=null;this.vertices=[];this.edges=[];this.cells=[]};Voronoi.prototype.sqrt=Math.sqrt;Voronoi.prototype.abs=Math.abs;Voronoi.prototype.\u03b5=Voronoi.\u03b5=1E-9;
Voronoi.prototype.inv\u03b5=Voronoi.inv\u03b5=1/Voronoi.\u03b5;Voronoi.prototype.equalWithEpsilon=function(a,b){return 1E-9>this.abs(a-b)};Voronoi.prototype.greaterThanWithEpsilon=function(a,b){return 1E-9<a-b};Voronoi.prototype.greaterThanOrEqualWithEpsilon=function(a,b){return 1E-9>b-a};Voronoi.prototype.lessThanWithEpsilon=function(a,b){return 1E-9<b-a};Voronoi.prototype.lessThanOrEqualWithEpsilon=function(a,b){return 1E-9>a-b};Voronoi.prototype.RBTree=function(){this.root=null};
Voronoi.prototype.RBTree.prototype.rbInsertSuccessor=function(a,b){var c;if(a){b.rbPrevious=a;if(b.rbNext=a.rbNext)a.rbNext.rbPrevious=b;a.rbNext=b;if(a.rbRight){for(a=a.rbRight;a.rbLeft;)a=a.rbLeft;a.rbLeft=b}else a.rbRight=b;c=a}else this.root?(a=this.getFirst(this.root),b.rbPrevious=null,b.rbNext=a,a.rbPrevious=b,a.rbLeft=b,c=a):(b.rbPrevious=b.rbNext=null,this.root=b,c=null);b.rbLeft=b.rbRight=null;b.rbParent=c;b.rbRed=!0;var e,d;for(a=b;c&&c.rbRed;)e=c.rbParent,c===e.rbLeft?(d=e.rbRight)&&d.rbRed?
(c.rbRed=d.rbRed=!1,e.rbRed=!0,a=e):(a===c.rbRight&&(this.rbRotateLeft(c),a=c,c=a.rbParent),c.rbRed=!1,e.rbRed=!0,this.rbRotateRight(e)):(d=e.rbLeft)&&d.rbRed?(c.rbRed=d.rbRed=!1,e.rbRed=!0,a=e):(a===c.rbLeft&&(this.rbRotateRight(c),a=c,c=a.rbParent),c.rbRed=!1,e.rbRed=!0,this.rbRotateLeft(e)),c=a.rbParent;this.root.rbRed=!1};
Voronoi.prototype.RBTree.prototype.rbRemoveNode=function(a){a.rbNext&&(a.rbNext.rbPrevious=a.rbPrevious);a.rbPrevious&&(a.rbPrevious.rbNext=a.rbNext);a.rbNext=a.rbPrevious=null;var b=a.rbParent,c=a.rbLeft,e=a.rbRight,d;d=c?e?this.getFirst(e):c:e;b?b.rbLeft===a?b.rbLeft=d:b.rbRight=d:this.root=d;var f;c&&e?(f=d.rbRed,d.rbRed=a.rbRed,d.rbLeft=c,c.rbParent=d,d!==e?(b=d.rbParent,d.rbParent=a.rbParent,a=d.rbRight,b.rbLeft=a,d.rbRight=e,e.rbParent=d):(d.rbParent=b,b=d,a=d.rbRight)):(f=a.rbRed,a=d);a&&(a.rbParent=
b);if(!f)if(a&&a.rbRed)a.rbRed=!1;else{do{if(a===this.root)break;if(a===b.rbLeft){if(a=b.rbRight,a.rbRed&&(a.rbRed=!1,b.rbRed=!0,this.rbRotateLeft(b),a=b.rbRight),a.rbLeft&&a.rbLeft.rbRed||a.rbRight&&a.rbRight.rbRed){a.rbRight&&a.rbRight.rbRed||(a.rbLeft.rbRed=!1,a.rbRed=!0,this.rbRotateRight(a),a=b.rbRight);a.rbRed=b.rbRed;b.rbRed=a.rbRight.rbRed=!1;this.rbRotateLeft(b);a=this.root;break}}else if(a=b.rbLeft,a.rbRed&&(a.rbRed=!1,b.rbRed=!0,this.rbRotateRight(b),a=b.rbLeft),a.rbLeft&&a.rbLeft.rbRed||
a.rbRight&&a.rbRight.rbRed){a.rbLeft&&a.rbLeft.rbRed||(a.rbRight.rbRed=!1,a.rbRed=!0,this.rbRotateLeft(a),a=b.rbLeft);a.rbRed=b.rbRed;b.rbRed=a.rbLeft.rbRed=!1;this.rbRotateRight(b);a=this.root;break}a.rbRed=!0;a=b;b=b.rbParent}while(!a.rbRed);a&&(a.rbRed=!1)}};Voronoi.prototype.RBTree.prototype.rbRotateLeft=function(a){var b=a.rbRight,c=a.rbParent;c?c.rbLeft===a?c.rbLeft=b:c.rbRight=b:this.root=b;b.rbParent=c;a.rbParent=b;a.rbRight=b.rbLeft;a.rbRight&&(a.rbRight.rbParent=a);b.rbLeft=a};
Voronoi.prototype.RBTree.prototype.rbRotateRight=function(a){var b=a.rbLeft,c=a.rbParent;c?c.rbLeft===a?c.rbLeft=b:c.rbRight=b:this.root=b;b.rbParent=c;a.rbParent=b;a.rbLeft=b.rbRight;a.rbLeft&&(a.rbLeft.rbParent=a);b.rbRight=a};Voronoi.prototype.RBTree.prototype.getFirst=function(a){for(;a.rbLeft;)a=a.rbLeft;return a};Voronoi.prototype.RBTree.prototype.getLast=function(a){for(;a.rbRight;)a=a.rbRight;return a};Voronoi.prototype.Diagram=function(a){this.site=a};
Voronoi.prototype.Cell=function(a){this.site=a;this.halfedges=[];this.closeMe=!1};Voronoi.prototype.Cell.prototype.init=function(a){this.site=a;this.halfedges=[];this.closeMe=!1;return this};Voronoi.prototype.createCell=function(a){var b=this.cellJunkyard.pop();return b?b.init(a):new this.Cell(a)};Voronoi.prototype.Cell.prototype.prepareHalfedges=function(){for(var a=this.halfedges,b=a.length,c;b--;)c=a[b].edge,c.vb&&c.va||a.splice(b,1);a.sort(function(a,b){return b.angle-a.angle});return a.length};
Voronoi.prototype.Cell.prototype.getNeighborIds=function(){for(var a=[],b=this.halfedges.length,c;b--;)c=this.halfedges[b].edge,null!==c.lSite&&c.lSite.voronoiId!=this.site.voronoiId?a.push(c.lSite.voronoiId):null!==c.rSite&&c.rSite.voronoiId!=this.site.voronoiId&&a.push(c.rSite.voronoiId);return a};
Voronoi.prototype.Cell.prototype.getBbox=function(){for(var a=this.halfedges,b=a.length,c=Infinity,e=Infinity,d=-Infinity,f=-Infinity,g,h;b--;)g=a[b].getStartpoint(),h=g.x,g=g.y,h<c&&(c=h),g<e&&(e=g),h>d&&(d=h),g>f&&(f=g);return{x:c,y:e,width:d-c,height:f-e}};Voronoi.prototype.Cell.prototype.pointIntersection=function(a,b){for(var c=this.halfedges,e=c.length,d,f;e--;){d=c[e];f=d.getStartpoint();d=d.getEndpoint();f=(b-f.y)*(d.x-f.x)-(a-f.x)*(d.y-f.y);if(!f)return 0;if(0<f)return-1}return 1};
Voronoi.prototype.Vertex=function(a,b){this.x=a;this.y=b};Voronoi.prototype.Edge=function(a,b){this.lSite=a;this.rSite=b;this.va=this.vb=null};Voronoi.prototype.Halfedge=function(a,b,c){this.site=b;this.edge=a;if(c)this.angle=Math.atan2(c.y-b.y,c.x-b.x);else{c=a.va;var e=a.vb;this.angle=a.lSite===b?Math.atan2(e.x-c.x,c.y-e.y):Math.atan2(c.x-e.x,e.y-c.y)}};Voronoi.prototype.createHalfedge=function(a,b,c){return new this.Halfedge(a,b,c)};
Voronoi.prototype.Halfedge.prototype.getStartpoint=function(){return this.edge.lSite===this.site?this.edge.va:this.edge.vb};Voronoi.prototype.Halfedge.prototype.getEndpoint=function(){return this.edge.lSite===this.site?this.edge.vb:this.edge.va};Voronoi.prototype.createVertex=function(a,b){var c=this.vertexJunkyard.pop();c?(c.x=a,c.y=b):c=new this.Vertex(a,b);this.vertices.push(c);return c};
Voronoi.prototype.createEdge=function(a,b,c,e){var d=this.edgeJunkyard.pop();d?(d.lSite=a,d.rSite=b,d.va=d.vb=null):d=new this.Edge(a,b);this.edges.push(d);c&&this.setEdgeStartpoint(d,a,b,c);e&&this.setEdgeEndpoint(d,a,b,e);this.cells[a.voronoiId].halfedges.push(this.createHalfedge(d,a,b));this.cells[b.voronoiId].halfedges.push(this.createHalfedge(d,b,a));return d};
Voronoi.prototype.createBorderEdge=function(a,b,c){var e=this.edgeJunkyard.pop();e?(e.lSite=a,e.rSite=null):e=new this.Edge(a,null);e.va=b;e.vb=c;this.edges.push(e);return e};Voronoi.prototype.setEdgeStartpoint=function(a,b,c,e){a.va||a.vb?a.lSite===c?a.vb=e:a.va=e:(a.va=e,a.lSite=b,a.rSite=c)};Voronoi.prototype.setEdgeEndpoint=function(a,b,c,e){this.setEdgeStartpoint(a,c,b,e)};Voronoi.prototype.Beachsection=function(){};
Voronoi.prototype.createBeachsection=function(a){var b=this.beachsectionJunkyard.pop();b||(b=new this.Beachsection);b.site=a;return b};Voronoi.prototype.leftBreakPoint=function(a,b){var c=a.site,e=c.x,d=c.y,f=d-b;if(!f)return e;var g=a.rbPrevious;if(!g)return-Infinity;var c=g.site,g=c.x,c=c.y,h=c-b;if(!h)return g;var k=g-e,m=1/f-1/h,l=k/h;return m?(-l+this.sqrt(l*l-2*m*(k*k/(-2*h)-c+h/2+d-f/2)))/m+e:(e+g)/2};
Voronoi.prototype.rightBreakPoint=function(a,b){var c=a.rbNext;if(c)return this.leftBreakPoint(c,b);c=a.site;return c.y===b?c.x:Infinity};Voronoi.prototype.detachBeachsection=function(a){this.detachCircleEvent(a);this.beachline.rbRemoveNode(a);this.beachsectionJunkyard.push(a)};
Voronoi.prototype.removeBeachsection=function(a){var b=a.circleEvent,c=b.x,e=b.ycenter,b=this.createVertex(c,e),d=a.rbPrevious,f=a.rbNext,g=[a],h=Math.abs;this.detachBeachsection(a);for(a=d;a.circleEvent&&1E-9>h(c-a.circleEvent.x)&&1E-9>h(e-a.circleEvent.ycenter);)d=a.rbPrevious,g.unshift(a),this.detachBeachsection(a),a=d;g.unshift(a);this.detachCircleEvent(a);for(d=f;d.circleEvent&&1E-9>h(c-d.circleEvent.x)&&1E-9>h(e-d.circleEvent.ycenter);)f=d.rbNext,g.push(d),this.detachBeachsection(d),d=f;g.push(d);
this.detachCircleEvent(d);c=g.length;for(e=1;e<c;e++)d=g[e],a=g[e-1],this.setEdgeStartpoint(d.edge,a.site,d.site,b);a=g[0];d=g[c-1];d.edge=this.createEdge(a.site,d.site,void 0,b);this.attachCircleEvent(a);this.attachCircleEvent(d)};
Voronoi.prototype.addBeachsection=function(a){for(var b=a.x,c=a.y,e,d,f,g,h=this.beachline.root;h;)if(f=this.leftBreakPoint(h,c)-b,1E-9<f)h=h.rbLeft;else if(g=b-this.rightBreakPoint(h,c),1E-9<g){if(!h.rbRight){e=h;break}h=h.rbRight}else{-1E-9<f?(e=h.rbPrevious,d=h):-1E-9<g?(e=h,d=h.rbNext):e=d=h;break}b=this.createBeachsection(a);this.beachline.rbInsertSuccessor(e,b);if(e||d)if(e===d)this.detachCircleEvent(e),d=this.createBeachsection(e.site),this.beachline.rbInsertSuccessor(b,d),b.edge=d.edge=this.createEdge(e.site,
b.site),this.attachCircleEvent(e),this.attachCircleEvent(d);else if(e&&!d)b.edge=this.createEdge(e.site,b.site);else if(e!==d){this.detachCircleEvent(e);this.detachCircleEvent(d);c=e.site;g=c.x;var h=c.y,k=a.x-g,m=a.y-h;f=d.site;var l=f.x-g,p=f.y-h,q=2*(k*p-m*l),n=k*k+m*m,u=l*l+p*p;g=this.createVertex((p*n-m*u)/q+g,(k*u-l*n)/q+h);this.setEdgeStartpoint(d.edge,c,f,g);b.edge=this.createEdge(c,a,void 0,g);d.edge=this.createEdge(a,f,void 0,g);this.attachCircleEvent(e);this.attachCircleEvent(d)}};
Voronoi.prototype.CircleEvent=function(){this.rbPrevious=this.rbParent=this.rbNext=this.rbLeft=this.arc=null;this.rbRed=!1;this.site=this.rbRight=null;this.x=this.y=this.ycenter=0};
Voronoi.prototype.attachCircleEvent=function(a){var b=a.rbPrevious,c=a.rbNext;if(b&&c){var e=b.site,b=a.site,d=c.site;if(e!==d){var c=b.x,f=b.y,g=e.x-c,h=e.y-f,e=d.x-c,k=d.y-f,d=2*(g*k-h*e);if(!(-2E-12<=d)){var m=g*g+h*h,l=e*e+k*k,h=(k*m-h*l)/d,g=(g*l-e*m)/d,e=g+f;(f=this.circleEventJunkyard.pop())||(f=new this.CircleEvent);f.arc=a;f.site=b;f.x=h+c;f.y=e+this.sqrt(h*h+g*g);f.ycenter=e;a.circleEvent=f;a=null;for(b=this.circleEvents.root;b;)if(f.y<b.y||f.y===b.y&&f.x<=b.x)if(b.rbLeft)b=b.rbLeft;else{a=
b.rbPrevious;break}else if(b.rbRight)b=b.rbRight;else{a=b;break}this.circleEvents.rbInsertSuccessor(a,f);a||(this.firstCircleEvent=f)}}}};Voronoi.prototype.detachCircleEvent=function(a){var b=a.circleEvent;b&&(b.rbPrevious||(this.firstCircleEvent=b.rbNext),this.circleEvents.rbRemoveNode(b),this.circleEventJunkyard.push(b),a.circleEvent=null)};
Voronoi.prototype.connectEdge=function(a,b){var c=a.vb;if(c)return!0;var e=a.va,c=b.xl,d=b.xr,f=b.yt,g=b.yb,h=a.lSite,k=a.rSite,m=h.x,l=h.y,p=k.x,q=k.y,n=(m+p)/2,u=(l+q)/2,r,t;this.cells[h.voronoiId].closeMe=!0;this.cells[k.voronoiId].closeMe=!0;q!==l&&(r=(m-p)/(q-l),t=u-r*n);if(void 0===r){if(n<c||n>=d)return!1;if(m>p){if(!e||e.y<f)e=this.createVertex(n,f);else if(e.y>=g)return!1;c=this.createVertex(n,g)}else{if(!e||e.y>g)e=this.createVertex(n,g);else if(e.y<f)return!1;c=this.createVertex(n,f)}}else if(-1>
r||1<r)if(m>p){if(!e||e.y<f)e=this.createVertex((f-t)/r,f);else if(e.y>=g)return!1;c=this.createVertex((g-t)/r,g)}else{if(!e||e.y>g)e=this.createVertex((g-t)/r,g);else if(e.y<f)return!1;c=this.createVertex((f-t)/r,f)}else if(l<q){if(!e||e.x<c)e=this.createVertex(c,r*c+t);else if(e.x>=d)return!1;c=this.createVertex(d,r*d+t)}else{if(!e||e.x>d)e=this.createVertex(d,r*d+t);else if(e.x<c)return!1;c=this.createVertex(c,r*c+t)}a.va=e;a.vb=c;return!0};
Voronoi.prototype.clipEdge=function(a,b){var c=a.va.x,e=a.va.y,d=0,f=1,g=a.vb.x-c,h=a.vb.y-e,k=c-b.xl;if(0===g&&0>k)return!1;k=-k/g;if(0>g){if(k<d)return!1;k<f&&(f=k)}else if(0<g){if(k>f)return!1;k>d&&(d=k)}k=b.xr-c;if(0===g&&0>k)return!1;k/=g;if(0>g){if(k>f)return!1;k>d&&(d=k)}else if(0<g){if(k<d)return!1;k<f&&(f=k)}k=e-b.yt;if(0===h&&0>k)return!1;k=-k/h;if(0>h){if(k<d)return!1;k<f&&(f=k)}else if(0<h){if(k>f)return!1;k>d&&(d=k)}k=b.yb-e;if(0===h&&0>k)return!1;k/=h;if(0>h){if(k>f)return!1;k>d&&(d=
k)}else if(0<h){if(k<d)return!1;k<f&&(f=k)}0<d&&(a.va=this.createVertex(c+d*g,e+d*h));1>f&&(a.vb=this.createVertex(c+f*g,e+f*h));if(0<d||1>f)this.cells[a.lSite.voronoiId].closeMe=!0,this.cells[a.rSite.voronoiId].closeMe=!0;return!0};Voronoi.prototype.clipEdges=function(a){for(var b=this.edges,c=b.length,e,d=Math.abs;c--;)if(e=b[c],!this.connectEdge(e,a)||!this.clipEdge(e,a)||1E-9>d(e.va.x-e.vb.x)&&1E-9>d(e.va.y-e.vb.y))e.va=e.vb=null,b.splice(c,1)};
Voronoi.prototype.closeCells=function(a){var b=a.xl,c=a.xr,e=a.yt;a=a.yb;for(var d=this.cells,f=d.length,g,h,k,m,l,p,q,n,u=Math.abs;f--;)if(g=d[f],g.prepareHalfedges()&&g.closeMe){k=g.halfedges;m=k.length;for(h=0;h<m;){l=k[h].getEndpoint();q=k[(h+1)%m].getStartpoint();if(1E-9<=u(l.x-q.x)||1E-9<=u(l.y-q.y))switch(!0){case this.equalWithEpsilon(l.x,b)&&this.lessThanWithEpsilon(l.y,a):n=this.equalWithEpsilon(q.x,b);p=this.createVertex(b,n?q.y:a);l=this.createBorderEdge(g.site,l,p);h++;k.splice(h,0,this.createHalfedge(l,
g.site,null));m++;if(n)break;l=p;case this.equalWithEpsilon(l.y,a)&&this.lessThanWithEpsilon(l.x,c):n=this.equalWithEpsilon(q.y,a);p=this.createVertex(n?q.x:c,a);l=this.createBorderEdge(g.site,l,p);h++;k.splice(h,0,this.createHalfedge(l,g.site,null));m++;if(n)break;l=p;case this.equalWithEpsilon(l.x,c)&&this.greaterThanWithEpsilon(l.y,e):n=this.equalWithEpsilon(q.x,c);p=this.createVertex(c,n?q.y:e);l=this.createBorderEdge(g.site,l,p);h++;k.splice(h,0,this.createHalfedge(l,g.site,null));m++;if(n)break;
l=p;case this.equalWithEpsilon(l.y,e)&&this.greaterThanWithEpsilon(l.x,b):n=this.equalWithEpsilon(q.y,e);p=this.createVertex(n?q.x:b,e);l=this.createBorderEdge(g.site,l,p);h++;k.splice(h,0,this.createHalfedge(l,g.site,null));m++;if(n)break;l=p;n=this.equalWithEpsilon(q.x,b);p=this.createVertex(b,n?q.y:a);l=this.createBorderEdge(g.site,l,p);h++;k.splice(h,0,this.createHalfedge(l,g.site,null));m++;if(n)break;l=p;n=this.equalWithEpsilon(q.y,a);p=this.createVertex(n?q.x:c,a);l=this.createBorderEdge(g.site,
l,p);h++;k.splice(h,0,this.createHalfedge(l,g.site,null));m++;if(n)break;l=p;n=this.equalWithEpsilon(q.x,c);p=this.createVertex(c,n?q.y:e);l=this.createBorderEdge(g.site,l,p);h++;k.splice(h,0,this.createHalfedge(l,g.site,null));m++;if(n)break;default:throw"Voronoi.closeCells() > this makes no sense!";}h++}g.closeMe=!1}};Voronoi.prototype.quantizeSites=function(a){for(var b=this.\u03b5,c=a.length,e;c--;)e=a[c],e.x=Math.floor(e.x/b)*b,e.y=Math.floor(e.y/b)*b};
Voronoi.prototype.recycle=function(a){if(a)if(a instanceof this.Diagram)this.toRecycle=a;else throw"Voronoi.recycleDiagram() > Need a Diagram object.";};
Voronoi.prototype.compute=function(a,b){var c=new Date;this.reset();this.toRecycle&&(this.vertexJunkyard=this.vertexJunkyard.concat(this.toRecycle.vertices),this.edgeJunkyard=this.edgeJunkyard.concat(this.toRecycle.edges),this.cellJunkyard=this.cellJunkyard.concat(this.toRecycle.cells),this.toRecycle=null);var e=a.slice(0);e.sort(function(a,b){var c=b.y-a.y;return c?c:b.x-a.x});for(var d=e.pop(),f=0,g,h,k=this.cells,m;;)if(m=this.firstCircleEvent,d&&(!m||d.y<m.y||d.y===m.y&&d.x<m.x)){if(d.x!==g||
d.y!==h)k[f]=this.createCell(d),d.voronoiId=f++,this.addBeachsection(d),h=d.y,g=d.x;d=e.pop()}else if(m)this.removeBeachsection(m.arc);else break;this.clipEdges(b);this.closeCells(b);e=new Date;d=new this.Diagram;d.cells=this.cells;d.edges=this.edges;d.vertices=this.vertices;d.execTime=e.getTime()-c.getTime();this.reset();return d};"undefined"!==typeof module&&(module.exports=Voronoi);function clamp(a,b,c){return Math.max(b,Math.min(a,c))}function pick(a,b){var c=Math.round(Math.random()*(a.length-1)),c=a[c];if("undefined"!=typeof b)for(;c==b;)c=Math.round(Math.random()*(a.length-1)),c=a[c];return c}
var VoronoiAnimation={voronoi:new Voronoi,sites:[],diagram:null,margin:125,canvas:null,colors:[],bbox:{xl:0,xr:0,yt:0,yb:0},normalizeEventCoords:function(a,b){b||(b=self.event);var c=0,e=0;if(b.pageX||b.pageY)c=b.pageX,e=b.pageY;else if(b.clientX||b.clientY)c=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e=b.clientY+document.body.scrollTop+document.documentElement.scrollTop;return{x:c-a.offsetLeft,y:e-a.offsetTop}},init:function(){var a=this,b=this;this.canvas=document.getElementById("voronoiCanvas");
this.overlay=document.getElementById("overlayCanvas");this.lines=document.getElementById("linesCanvas");this.hidden=document.getElementById("hiddenCanvas");this.bbox.xr=this.canvas.width;this.bbox.yb=this.canvas.height;this.colors=["#FF6138","#FFFF9D","#BEEB9F","#79BD8F","#00A388"];a.trackmouse=-1;$(this.canvas).on("mousemove",function(c){a.trackmouse=a.sites.length-1;var d=a.sites[a.trackmouse];c=b.normalizeEventCoords(b.canvas,c);d.x=c.x;d.vx=0;d.y=c.y;d.vy=0});$(this.canvas).on("mouseout",function(b){a.trackmouse=
-1});this.randomSites(35,!0);this.render();setTimeout("VoronoiAnimation.animate()",0);this.byLineEl=document.getElementById("byline");var c=pick(byLines);this.prevByLine=c;this.byLineEl.innerHTML=c;setInterval("VoronoiAnimation.ticker()",5E3)},ticker:function(){var a=pick(byLines,this.prevByLine);this.prevByLine=a;var b=this.byLineEl;$(this.byLineEl).animate({opacity:0},750,"easeOutQuad",function(){b.innerHTML=a;$(b).animate({opacity:1},250,"easeInQuad")})},animate:function(){for(var a=1;a<this.sites.length;a++){var b=
this.sites[a];b.x+=b.dx*b.vx;if(0>b.x||b.x>this.canvas.width)b.dx=-b.dx;b.x=Math.min(this.canvas.width,Math.max(0,b.x));b.y+=b.dy*b.vy;if(0>b.y||b.y>this.canvas.height)b.dy=-b.dy;b.y=Math.min(this.canvas.height,Math.max(0,b.y));this.sites[a]=b}this.diagram=this.voronoi.compute(this.sites,this.bbox);this.render();setTimeout("VoronoiAnimation.animate()",1E3/60)},clearSites:function(){this.sites=[];this.diagram=this.voronoi.compute(this.sites,this.bbox)},randomSites:function(a,b){b&&(this.sites=[]);
for(var c=this.margin,e=this.canvas.width-2*this.margin,d=this.margin,f=this.canvas.height-2*this.margin,g=0;g<a;g++)this.addSite(Math.round(c+Math.random()*e),Math.round(d+Math.random()*f));this.diagram=this.voronoi.compute(this.sites,this.bbox)},addSite:function(a,b){this.sites.push({x:a,y:b,dx:.5<Math.random()?-1:1,dy:.5<Math.random()?-1:1,vx:clamp(Math.random(),.2,1),vy:clamp(Math.random(),.2,1),c:pick(this.colors)});this.diagram=this.voronoi.compute(this.sites,this.bbox)},renderEdges:function(a,
b){var c=this.diagram.edges,e=c.length,d;if(e){var f;a.beginPath();for(a.strokeStyle=b;e--;)f=c[e],d=f.va,a.moveTo(d.x,d.y),d=f.vb,a.lineTo(d.x,d.y);a.stroke()}},renderSites:function(a,b){var c=this.sites,e=c.length,d;a.beginPath();a.fillStyle=b;for(a.strokeStyle=b;e--;)d=c[e],a.rect(d.x-2/3,d.y-2/3,2,2);a.fill()},renderCell:function(a,b,c){b=b.halfedges;var e=b.length;if(2<e){v=b[0].getStartpoint();a.beginPath();a.moveTo(v.x,v.y);for(var d=0;d<e;d++)v=b[d].getEndpoint(),a.lineTo(v.x,v.y);a.fillStyle=
c;a.strokeStyle=c;a.fill()}},renderCellOutline:function(a,b,c,e){if("undefined"!=typeof e){var d=a.lineWidth;a.lineWidth=e}a.strokeStyle=c;b=b.halfedges;c=b.length;if(2<c){v=b[0].getStartpoint();a.beginPath();a.moveTo(v.x,v.y);for(var f=0;f<c;f++)v=b[f].getEndpoint(),a.lineTo(v.x,v.y);a.stroke()}"undefined"!=typeof e&&(a.lineWidth=d)},clear:function(a,b,c){"undefined"==typeof c&&(c=1);a.globalAlpha=c;a.lineWidth=1;a.strokeStyle="#000";a.fillStyle="#000";a.clearRect(0,0,a.canvas.width,a.canvas.height)},
render:function(){var a=this.canvas.getContext("2d");this.clear(a,"#fff");var b=this.overlay.getContext("2d");b.globalCompositeOperation="destination-atop";this.clear(b,"#000",.95);var c=this.lines.getContext("2d");this.clear(c,"#fff");var e=this.hidden.getContext("2d");this.clear(e,"#000");if(-1!=this.trackmouse){var d=this.diagram.cells[this.sites[this.trackmouse].voronoiId];d&&this.renderCell(b,d,"#fff")}for(b=0;b<this.diagram.cells.length;b++)if(d=this.diagram.cells[b],void 0==d.site.c&&(d.site.c=
this.colors[Math.round(Math.random()*this.colors.length)]),this.renderCellOutline(e,d,this.colors[4],1),-1==this.trackmouse||this.sites[this.trackmouse].voronoiId!=b)this.renderCell(a,d,d.site.c),this.renderCellOutline(a,d,d.site.c,.5);"#debug"==document.location.hash&&(document.getElementById("caption").style.display="none",this.renderEdges(e,"#f0f"),this.renderEdges(a,"#f0f"),this.renderSites(e,"#f0f"),this.renderSites(a,"#f0f"));a=e.getImageData(0,112.141,this.hidden.width,242);c.putImageData(a,
0,111.141)}},byLines='Can be found on, <a href="https://github.com/brucejillis">Github</a>;Can be found on, <a href="https://www.youtube.com/user/JillisterHove">YouTube</a>;Can sometimes be found on, <a href="https://twitter.com/jillis">Twitter</a>;Lives in, <a href="https://www.google.nl/maps/place/Arnhem/@52.0056159,5.8965987,12z/data=!3m1!4b1!4m2!3m1!1s0x47c7ba91ce9b2273:0x161c5ae0f973cad7?hl=en">Arnhem, the Netherlands</a>;Can be contacted via, <a href="mailto://j.terhove (AT) gmail (DOT) com">j.terhove (AT) gmail (DOT) com</a>.;Once made a mario-like game where you are the bad guy, <a href="https://dl.dropboxusercontent.com/u/29254286/index.html">Before the Hero Arrives</a>.;Once made a top-down sailing simulation game, <a href="https://dl.dropboxusercontent.com/u/29254286/bgj2.html">Eco2</a>.;Once made some stuff in flash, <a href="https://dl.dropboxusercontent.com/u/29254286/juicy.html">games and juicyness</a>, <a href="https://dl.dropboxusercontent.com/u/29254286/FlxMinimap.html">flixel minimap</a>.;Once tried to make a game in unity, <a href="https://dl.dropboxusercontent.com/u/29254286/ionan/ionan.html">v2</a> < <a href="https://dl.dropboxusercontent.com/u/29254286/planetwide/Web.html">v1</a> < <a href="https://dl.dropboxusercontent.com/u/29254286/escape/escape.html">v0.1</a>.;Recorded some UI experiments in unity, <a href="https://dl.dropboxusercontent.com/u/29254286/v09.gif">as a GIF</a> and on <a href="https://www.youtube.com/watch?v=fTjL-R37vvU&ab_channel=JillisterHove">YouTube</a>.;Wrote libraries for language detection in, <a href="https://github.com/BruceJillis/PHP-Language-Detection">PHP</a> and <a href="https://github.com/BruceJillis/LanguageIdentification">python</a>.;Really enjoyed playing minecraft, <a href="https://www.youtube.com/watch?v=s2y-adFJeKQ&ab_channel=JillisterHove">Gaze Detecting Enderman Heads</a>.;Really enjoyed playing minecraft, <a href="https://www.youtube.com/watch?v=a1yORDZsHb8&ab_channel=JillisterHove">Prototype Dungeon Generator</a> + <a href="https://www.youtube.com/watch?v=55QhLcPvWS8&ab_channel=JillisterHove">more work</a>.;Really enjoyed playing minecraft, <a href="https://www.youtube.com/watch?v=Ns208w9rua0&ab_channel=JillisterHove">Mailbox Mod</a>.;Once tried to create a programming language, <a href="https://github.com/BruceJillis/fp.py">fp</a>.'.split(";");
$(document).ready(function(){function a(){b.width=window.innerWidth;b.height=window.innerHeight;c.width=window.innerWidth;c.height=window.innerHeight;e.width=window.innerWidth;e.height=window.innerHeight;d.width=window.innerWidth;d.height=window.innerHeight;VoronoiAnimation.init();window.removeEventListener("resize",a)}var b=document.getElementById("voronoiCanvas"),c=document.getElementById("overlayCanvas"),e=document.getElementById("linesCanvas"),d=document.getElementById("hiddenCanvas");window.addEventListener("resize",
a,!1);a();$(document).on("click","h2 > a",function(a){a=$(this).attr("href");ga("send","event","click",a)})});